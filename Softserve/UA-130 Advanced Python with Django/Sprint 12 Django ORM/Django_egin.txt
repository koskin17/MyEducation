1. –ê —á—Ç–æ –∑–Ω–∞—á—è—Ç –∫–æ–º–∞–Ω–¥—ã `makemigrations` –∏ `migrate`? –ß—Ç–æ –æ–Ω–∏ –¥–µ–ª–∞—é—Ç?
2. –¢.–µ. –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞ –∏ –º—ã –∏–∑ django –∫ –Ω–µ–π –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è, –∞ –ø–æ—Ç–æ–º –∏–∑ django —Å–æ–∑–¥–∞—ë–º –≤ –Ω–µ–π —Ç–∞–±–ª–∏—Ü—ã, –Ω–∞—Å—Ç–∞–∏–≤–∞–µ–º / –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∏ —É–∂–µ –ø–æ—Ç–æ–º —Ä–∞–±–æ—Ç–∞–µ–º —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏, —Ç.–µ. —á–∏—Ç–∞–µ–º –Ω—É–∂–Ω—ã–µ –Ω–∞–º –¥–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥–∞–º–∏ –∫–ª–∞—Å—Å–æ–≤ django?

–ü—Ä–µ–∫—Ä–∞—Å–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è! üí° –í–æ–Ω–∏ —è–∫—Ä–∞–∑ —Å—Ç–æ—Å—É—é—Ç—å—Å—è **–∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É —Ä–æ–±–æ—Ç–∏ –∑ –º–æ–¥–µ–ª—è–º–∏ Django** —Ç–∞ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö. –î–∞–≤–∞–π —Ä–æ–∑–±–µ—Ä–µ–º–æ –¥–æ–∫–ª–∞–¥–Ω–æ:

---

## ‚úÖ **1. –©–æ —Ä–æ–±–ª—è—Ç—å `makemigrations` —ñ `migrate` —É Django?**

### üî® `makemigrations`

> –ö–æ–º–∞–Ω–¥–∞ `python manage.py makemigrations`

üî∏ –ê–Ω–∞–ª—ñ–∑—É—î –≤—Å—ñ **–∑–º—ñ–Ω–∏ —É —Ñ–∞–π–ª–∞—Ö –º–æ–¥–µ–ª–µ–π (`models.py`)**
üî∏ –°—Ç–≤–æ—Ä—é—î —Ñ–∞–π–ª **–º—ñ–≥—Ä–∞—Ü—ñ–π** —É –ø–∞–ø—Ü—ñ `migrations/`, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

```
library/book/migrations/0001_initial.py
```

üì¶ –£ —Ü—å–æ–º—É —Ñ–∞–π–ª—ñ ‚Äî **—ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó SQL**, —è–∫—ñ —Ç—Ä–µ–±–∞ –≤–∏–∫–æ–Ω–∞—Ç–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–±–æ –∑–º—ñ–Ω–∏ —Ç–∞–±–ª–∏—Ü—å.

> –¶–µ —è–∫ –ø–ª–∞–Ω –∞–±–æ —Ä–µ—Ü–µ–ø—Ç –¥–ª—è –∑–º—ñ–Ω–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –ë–î.

---

### üèó `migrate`

> –ö–æ–º–∞–Ω–¥–∞ `python manage.py migrate`

üîπ –ü—Ä–æ—á–∏—Ç—É—î —Ñ–∞–π–ª –º—ñ–≥—Ä–∞—Ü—ñ–π, –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π `makemigrations`
üîπ –í–∏–∫–æ–Ω—É—î **SQL-–∑–∞–ø–∏—Ç–∏** —É –ë–î, —â–æ–±:

* —Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ
* –∑–º—ñ–Ω–∏—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–æ–ª—ñ–≤ (–¥–æ–¥–∞—Ç–∏, –≤–∏–¥–∞–ª–∏—Ç–∏, –∑–º—ñ–Ω–∏—Ç–∏ —Ç–∏–ø)
* –¥–æ–¥–∞—Ç–∏ –∑–≤‚Äô—è–∑–∫–∏ –º—ñ–∂ —Ç–∞–±–ª–∏—Ü—è–º–∏
* –æ–Ω–æ–≤–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é `django_migrations` (–¥–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ –º—ñ–≥—Ä–∞—Ü—ñ—ó)

---

### üîÅ –°–ø—ñ–ª—å–Ω–æ:

```bash
python manage.py makemigrations  # —Å—Ç–≤–æ—Ä—é—î —Ñ–∞–π–ª–∏ –º—ñ–≥—Ä–∞—Ü—ñ–π
python manage.py migrate         # –≤–∏–∫–æ–Ω—É—î —ó—Ö —É –ë–î
```

---

## ‚úÖ **2. –ß–∏ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –≤–∂–µ —Å—Ç–≤–æ—Ä–µ–Ω–∞ –ë–î, –ø–µ—Ä—à –Ω—ñ–∂ –∑–∞–ø—É—Å–∫–∞—Ç–∏ Django?**

–¢–∞–∫ ‚úÖ

### üî∑ –°–ø–æ—á–∞—Ç–∫—É: —Å—Ç–≤–æ—Ä—é—î—à –ø–æ—Ä–æ–∂–Ω—é –ë–î —É PostgreSQL (–∞–±–æ SQLite)

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —É pgAdmin —Å—Ç–≤–æ—Ä—é—î—à –ë–î:

```
–ù–∞–∑–≤–∞: library
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: postgres
```

---

### üî∑ –ü–æ—Ç—ñ–º: —É Django `settings.py` –ø—Ä–æ–ø–∏—Å—É—î—à –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'library',
        'USER': 'postgres',
        'PASSWORD': '1234',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}
```

---

### üî∑ –Ü —Ç—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è —Ü—å–æ–≥–æ –∑–∞–ø—É—Å–∫–∞—î—à:

```bash
python manage.py makemigrations
python manage.py migrate
```

Django –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ –ë–î, **—Å—Ç–≤–æ—Ä—é—î —Ç–∞–±–ª–∏—Ü—ñ**, –∞ —Ç–∏ –ø—Ä–∞—Ü—é—î—à –∑ –Ω–∏–º–∏ —è–∫ –∑ Python-–æ–±'—î–∫—Ç–∞–º–∏:

```python
book = Book.objects.get(id=3)
print(book.name)
```

---

### üîÅ –û—Ç–∂–µ, –ø—ñ–¥—Å—É–º—É—î–º–æ:

| –ö—Ä–æ–∫ | –û–ø–∏—Å                                      |
| ---- | ----------------------------------------- |
| 1Ô∏è‚É£  | –°—Ç–≤–æ—Ä—é—î—à –ø–æ—Ä–æ–∂–Ω—é –ë–î (PostgreSQL, SQLite‚Ä¶) |
| 2Ô∏è‚É£  | –ü—Ä–æ–ø–∏—Å—É—î—à –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ë–î –≤ `settings.py` |
| 3Ô∏è‚É£  | –ü–∏—à–µ—à –º–æ–¥–µ–ª—ñ (`models.py`)                |
| 4Ô∏è‚É£  | `makemigrations` ‚Äî –≥–µ–Ω–µ—Ä—É—î "–ø–ª–∞–Ω –¥—ñ–π"     |
| 5Ô∏è‚É£  | `migrate` ‚Äî –≤–∏–∫–æ–Ω—É—î –ø–ª–∞–Ω, —Å—Ç–≤–æ—Ä—é—î —Ç–∞–±–ª–∏—Ü—ñ |
| 6Ô∏è‚É£  | –ü—Ä–∞—Ü—é—î—à –∑ —Ç–∞–±–ª–∏—Ü—è–º–∏ —á–µ—Ä–µ–∑ ORM             |

---

### üìå **1. –©–æ —Ç–∞–∫–µ ‚Äú–ø–æ–ª—è —Ç–∞–±–ª–∏—Ü—ñ –ë–î‚Äù —É Django –º–æ–¥–µ–ª—è—Ö?**

–ö–æ–ª–∏ –º–∏ –æ–ø–∏—Å—É—î–º–æ –º–æ–¥–µ–ª—å Django:

```python
class Book(models.Model):
    name = models.CharField(max_length=128)
    count = models.IntegerField(default=10)
```

üîπ –ú–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ **—Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ñ `book` –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö**.

üß© –í —Ç–∞–±–ª–∏—Ü—ñ –ë–î:

| id | name          | count |
| -- | ------------- | ----- |
| 1  | "HarryPotter" | 10    |

* `id` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á (–ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á = —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä)
* `name` ‚Äî –ø–æ–ª–µ —Ç–∏–ø—É VARCHAR(128)
* `count` ‚Äî –ø–æ–ª–µ —Ç–∏–ø—É INTEGER

> –û—Ç–∂–µ, **‚Äú–ø–æ–ª—è –º–æ–¥–µ–ª—ñ‚Äù = —Å—Ç–æ–≤–ø—á–∏–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü—ñ –≤ –ë–î**

---

### üìå **2. –ù–∞–≤—ñ—â–æ Django —Å—Ç–≤–æ—Ä—é—î —Ç–∞–±–ª–∏—Ü—ñ, —è–∫—â–æ –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∂–µ –≤ –ë–î?**

‚ùóÔ∏èDjango **–∫–µ—Ä—É—î –±–∞–∑–æ—é** ‚Äî –≤—ñ–Ω –Ω–µ –ø—Ä–æ—Å—Ç–æ —á–∏—Ç–∞—î –¥–∞–Ω—ñ, –∞:

* —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ (`makemigrations`, `migrate`)
* –∑–º—ñ–Ω—é—î —ó—Ö, —è–∫—â–æ —Ç–∏ –∑–º—ñ–Ω–∏—à –º–æ–¥–µ–ª—å
* –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –±—É–¥—É—î –∑–≤‚Äô—è–∑–∫–∏, —ñ–Ω–¥–µ–∫—Å–∏, —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö

> –¶–µ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è **—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ ORM** ‚Äî Object-Relational Mapping: Python ‚Üî SQL

---

#### üî∏ –Ø–∫—ñ —Ç–∞–±–ª–∏—Ü—ñ —Å—Ç–≤–æ—Ä—é—î Django?

1. –¢–∞–±–ª–∏—Ü—ñ –≤—Å—ñ—Ö —Ç–≤–æ—ó—Ö –º–æ–¥–µ–ª–µ–π: `book`, `author`, `order`, `customuser`...
2. –¢–∞–±–ª–∏—Ü—ñ –¥–ª—è ManyToMany (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `book_authors`)
3. –¢–∞–±–ª–∏—Ü—ñ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó (`auth_user`, `auth_permission` —Ç–æ—â–æ)
4. –¢–∞–±–ª–∏—Ü—è `django_migrations` ‚Äî –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∑–º—ñ–Ω

---

### üìå **3. –©–æ —Ç–∞–∫–µ `models.ManyToManyField()` —ñ —è–∫ –≤–æ–Ω–æ –ø—Ä–∞—Ü—é—î?**

#### ‚û§ –§–æ—Ä–º–∞–ª—å–Ω–æ:

```python
authors = models.ManyToManyField(Author)
```

–¶–µ –∑–Ω–∞—á–∏—Ç—å:
**–æ–¥–Ω–∞ –∫–Ω–∏–≥–∞ –º–æ–∂–µ –º–∞—Ç–∏ –∫—ñ–ª—å–∫–æ—Ö –∞–≤—Ç–æ—Ä—ñ–≤**
—ñ **–æ–¥–∏–Ω –∞–≤—Ç–æ—Ä –º–æ–∂–µ –º–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –∫–Ω–∏–≥**

üõ† Django —Å—Ç–≤–æ—Ä—é—î **–ø—Ä–æ–º—ñ–∂–Ω—É —Ç–∞–±–ª–∏—Ü—é**:

| book\_id | author\_id |
| -------- | ---------- |
| 1        | 10         |
| 1        | 11         |
| 2        | 11         |

–¶—è —Ç–∞–±–ª–∏—Ü—è –∑–≤'—è–∑—É—î **ID –∫–Ω–∏–≥** —Ç–∞ **ID –∞–≤—Ç–æ—Ä—ñ–≤** ‚Äî —Ü–µ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è "–±–∞–≥–∞—Ç–æ-–¥–æ-–±–∞–≥–∞—Ç—å–æ—Ö".

---

#### ‚û§ –ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:

> `models.ManyToManyField(Author)` ‚Äî —Ü–µ —è–∫ —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä—ñ–≤ —É –∫–æ–∂–Ω–æ—ó –∫–Ω–∏–≥–∏. –ê–ª–µ —Ü–µ–π —Å–ø–∏—Å–æ–∫ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —É –æ–∫—Ä–µ–º—ñ–π —Ç–∞–±–ª–∏—Ü—ñ –≤ –±–∞–∑—ñ.

---

#### ‚ùì–ê —â–æ —Ç–∞–∫–µ `models` –≤–∑–∞–≥–∞–ª—ñ?

`models` ‚Äî —Ü–µ **–º–æ–¥—É–ª—å Django**, —É —è–∫–æ–º—É —î –∫–ª–∞—Å–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –ë–î:

* `models.Model` ‚Äî –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –º–æ–¥–µ–ª–µ–π
* `models.CharField`, `models.IntegerField`, `models.ForeignKey`, `models.ManyToManyField` ‚Äî **–∫–ª–∞—Å–∏-–ø–æ–ª—è**

---

### üìå **4. –©–æ —Ç–∞–∫–µ ForeignKey()? –Ø–∫ –π–æ–≥–æ —á–∏—Ç–∞—Ç–∏?**

```python
user = models.ForeignKey(CustomUser, on_delete=models.CASCADE)
```

–¶–µ –∑–Ω–∞—á–∏—Ç—å:

> ‚Äú–¶–µ –ø–æ–ª–µ `user` –±—É–¥–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è (–∑–≤'—è–∑–æ–∫) –Ω–∞ **–æ–¥–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞** –∑ —Ç–∞–±–ª–∏—Ü—ñ `customuser`‚Äù

üõ† Django —Å—Ç–≤–æ—Ä—é—î –≤ —Ç–∞–±–ª–∏—Ü—ñ `order` **—Å—Ç–æ–≤–ø–µ—Ü—å `user_id`** —ñ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –∑–≤'—è–∑–æ–∫:
–æ–¥–∏–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á ‚Üê –±–∞–≥–∞—Ç–æ –∑–∞–º–æ–≤–ª–µ–Ω—å

---

#### üîπ –§–æ—Ä–º–∞–ª—å–Ω–æ:

`models.ForeignKey(...)` ‚Äî —Ç–µ–∂ **–∫–ª–∞—Å –∑ –º–æ–¥—É–ª—è models**, —è–∫ —ñ –≤—Å—ñ —ñ–Ω—à—ñ –ø–æ–ª—è.

---

### üìå **5. ‚Äú–ó–∞–º—ñ—Å—Ç—å SQL –º–∏ –ø—Ä–∞—Ü—é—î–º–æ –∑ Python‚Äù ‚Äî –ø—Ä–∏–∫–ª–∞–¥ Django ORM**

–£—è–≤—ñ–º–æ, —â–æ —Ç–∏ —Ö–æ—á–µ—à –¥—ñ—Å—Ç–∞—Ç–∏ –≤—Å—ñ –∫–Ω–∏–≥–∏, –¥–µ `count > 5`.

#### üß± –í–∞—Ä—ñ–∞–Ω—Ç SQL:

```sql
SELECT * FROM book WHERE count > 5;
```

#### üêç –í–∞—Ä—ñ–∞–Ω—Ç Django ORM:

```python
books = Book.objects.filter(count__gt=5)
```

---

üî∏ –Ü–Ω—à—ñ –ø—Ä–∏–∫–ª–∞–¥–∏:

| SQL                                         | Django ORM                          |
| ------------------------------------------- | ----------------------------------- |
| `SELECT * FROM book;`                       | `Book.objects.all()`                |
| `SELECT * FROM book WHERE id=3;`            | `Book.objects.get(id=3)`            |
| `DELETE FROM book WHERE id=3;`              | `Book.objects.get(id=3).delete()`   |
| `INSERT INTO book (name) VALUES ('Harry');` | `Book.objects.create(name='Harry')` |

---

### ‚úÖ –ü–µ—Ä–µ–≤–∞–≥–∏ ORM:

* –ù–µ —Ç—Ä–µ–±–∞ –ø–∏—Å–∞—Ç–∏ SQL
* –í—Å–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è —â–µ –¥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
* –ü—Ä–∞—Ü—é—î –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–∏–ø—É –ë–î (PostgreSQL, SQLite, MySQL)
* –ë–µ–∑–ø–µ—á–Ω—ñ—à–µ (–Ω–µ–º–∞—î SQL injection)

