–û—Ç–ª–∏—á–Ω–æ, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ –¢–µ–ø–µ—Ä—å —Ä–∞–∑–±–µ—Ä—ë–º –≤–µ—Å—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º—ã –Ω–∞–ø–∏—Å–∞–ª–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ CRUD —Å –ø–æ–º–æ—â—å—é Django REST Framework. –Ø –±—É–¥—É –æ–±—ä—è—Å–Ω—è—Ç—å –ø–æ—Å—Ç—Ä–æ—á–Ω–æ, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ ‚Äî –∫–∞–∫ –æ–ø—ã—Ç–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –Ω–æ –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏.

---

## üîß –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ DRF (Django REST Framework)

–ß—Ç–æ–±—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API, –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ 3 –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

1. **–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã (`serializers.py`)** ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –º–æ–¥–µ–ª–µ–π –≤ JSON –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç.
2. **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (`views.py`)** ‚Äî –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.
3. **–ú–∞—Ä—à—Ä—É—Ç—ã (`urls.py`)** ‚Äî URL-–∞–¥—Ä–µ—Å–∞, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –¥–æ—Å—Ç—É–ø–Ω—ã –º–µ—Ç–æ–¥—ã API.

---

## üìÑ –ü—Ä–∏–º–µ—Ä –Ω–∞ `UserViewSet` ‚Äî —Ä–∞–∑–±–æ—Ä —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

### 1. `serializers.py` ‚Äî —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```python
from rest_framework import serializers
from authentication.models import CustomUser
```

* –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º **—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã DRF** –∏ –Ω–∞—à—É –º–æ–¥–µ–ª—å `CustomUser`, —á—Ç–æ–±—ã –Ω–∞ –∏—Ö –æ—Å–Ω–æ–≤–µ —Å–æ–∑–¥–∞—Ç—å API.

```python
class CustomUserSerializer(serializers.ModelSerializer):
```

* –°–æ–∑–¥–∞—ë–º **—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä**, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –º–æ–¥–µ–ª–∏ (`ModelSerializer`) ‚Äî –æ–Ω —Å–∞–º –≤–æ–∑—å–º—ë—Ç –ø–æ–ª—è –∏–∑ –º–æ–¥–µ–ª–∏.

```python
    class Meta:
        model = CustomUser
        fields = '__all__'
```

* –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–ª–∞—Å—Å `Meta` —Å–æ–æ–±—â–∞–µ—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—É:

  * –∫–∞–∫—É—é –º–æ–¥–µ–ª—å –æ–Ω –æ–ø–∏—Å—ã–≤–∞–µ—Ç (`CustomUser`);
  * –∫–∞–∫–∏–µ –ø–æ–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (`__all__` ‚Äî –≤—Å–µ –ø–æ–ª—è –º–æ–¥–µ–ª–∏).

> üí° –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ JSON –∏ –æ–±—Ä–∞—Ç–Ω–æ.

---

### 2. `views.py` ‚Äî –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ CRUD

```python
from rest_framework import viewsets
from authentication.models import CustomUser
from .serializers import CustomUserSerializer
```

* –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω—É–∂–Ω—ã–µ –∫–ª–∞—Å—Å—ã:

  * `viewsets` ‚Äî –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ DRF –¥–ª—è CRUD;
  * –Ω–∞—à—É –º–æ–¥–µ–ª—å –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä.

```python
class UserViewSet(viewsets.ModelViewSet):
```

* –°–æ–∑–¥–∞—ë–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (`ViewSet`) –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* `ModelViewSet` ‚Äî —ç—Ç–æ –∫–ª–∞—Å—Å DRF, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ —É–º–µ–µ—Ç –¥–µ–ª–∞—Ç—å –≤—Å—ë:

  * `GET` —Å–ø–∏—Å–æ–∫ (Read all)
  * `GET /id/` (Read one)
  * `POST` (Create)
  * `PUT`/`PATCH` (Update)
  * `DELETE` (Delete)

```python
    queryset = CustomUser.objects.all()
    serializer_class = CustomUserSerializer
```

* `queryset` ‚Äî –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.
* `serializer_class` ‚Äî –∫–∞–∫ –∏—Ö –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –≤ JSON.

---

### 3. `urls.py` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ URL-–∞–¥—Ä–µ—Å–æ–≤

```python
from rest_framework.routers import DefaultRouter
from authentication.views import UserViewSet
```

* –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º `router` ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç DRF, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç URL –¥–ª—è –≤—Å–µ—Ö CRUD-–æ–ø–µ—Ä–∞—Ü–∏–π.

```python
router = DefaultRouter()
router.register(r'user', UserViewSet, basename='user')
```

* –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –º–∞—Ä—à—Ä—É—Ç `/user/`, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å `UserViewSet`.
* `basename='user'` ‚Äî —ç—Ç–æ –Ω—É–∂–Ω–æ, –µ—Å–ª–∏ `queryset` –Ω–µ —É–∫–∞–∑–∞–Ω –Ω–∞–ø—Ä—è–º—É—é (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –∏ –Ω–µ –ø–∏—Å–∞—Ç—å).

```python
urlpatterns = [
    path('api/v1/', include(router.urls)),
]
```

* –ü–æ–¥–∫–ª—é—á–∞–µ–º `router` –∫ –æ–±—â–∏–º URL –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ –∞–¥—Ä–µ—Å—É `/api/v1/`.

> üîé –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –º—ã –ø–æ–ª—É—á–∞–µ–º:

* `GET /api/v1/user/` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
* `POST /api/v1/user/` ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
* `GET /api/v1/user/1/` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ–≥–æ
* `PUT/PATCH /api/v1/user/1/` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å
* `DELETE /api/v1/user/1/` ‚Äî —É–¥–∞–ª–∏—Ç—å

---

### üåê Postman = —É–¥–æ–±–Ω—ã–π —Ç–µ—Å—Ç

| –ú–µ—Ç–æ–¥  | URL               | –î–µ–π—Å—Ç–≤–∏–µ           |
| ------ | ----------------- | ------------------ |
| GET    | `/api/v1/user/`   | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö      |
| GET    | `/api/v1/user/1/` | –ü–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ–≥–æ    |
| POST   | `/api/v1/user/`   | –°–æ–∑–¥–∞—Ç—å            |
| PUT    | `/api/v1/user/1/` | –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é |
| PATCH  | `/api/v1/user/1/` | –û–±–Ω–æ–≤–∏—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ  |
| DELETE | `/api/v1/user/1/` | –£–¥–∞–ª–∏—Ç—å            |

---

### üîí –ü–æ—á–µ–º—É ViewSet –∏ Router?

–ü–æ—Ç–æ–º—É —á—Ç–æ:

* `ModelViewSet` —Å–æ–∫—Ä–∞—â–∞–µ—Ç –∫–æ–¥: —Ç–µ–±–µ –Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –º–µ—Ç–æ–¥—ã –≤—Ä—É—á–Ω—É—é.
* `router` —Å–∞–º —Å–æ–∑–¥–∞—ë—Ç –º–∞—Ä—à—Ä—É—Ç—ã, –Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å `path()` –≤—Ä—É—á–Ω—É—é.

---

## ‚öôÔ∏è –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç ¬´–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º¬ª

1. –ö–ª–∏–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, Postman) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å.
2. `router` –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ –Ω—É–∂–Ω—ã–π `ViewSet`.
3. `ViewSet` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `queryset` (–¥–∞–Ω–Ω—ã–º–∏) –∏ `serializer` (–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º).
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≤–∏–¥–µ JSON.

---

## üí¨ –•–æ—á–µ—à—å –µ—â—ë –≥–ª—É–±–∂–µ?

–Ø –º–æ–≥—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:

* –ü–æ—è—Å–Ω–∏—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É `ModelViewSet`, `ViewSet`, `GenericAPIView`
* –û–±—ä—è—Å–Ω–∏—Ç—å, –∫–∞–∫ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –º–µ—Ç–æ–¥—ã (`create`, `update`, `destroy`)
* –ü–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, –ø–∞–≥–∏–Ω–∞—Ü–∏—é, —Ñ–∏–ª—å—Ç—Ä—ã –∏ —Ç.–¥.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –º–æ–≥—É —Å–µ–π—á–∞—Å —Ä–∞–∑–æ–±—Ä–∞—Ç—å –∫–æ–¥ `OrderViewSet`, `AuthorViewSet`, `BookViewSet` —Ç–∞–∫ –∂–µ –ø–æ–¥—Ä–æ–±–Ω–æ. –ì–æ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø–æ –∫–∞–∂–¥–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É ‚Äî —Å–∫–∞–∂–∏ —Ç–æ–ª—å–∫–æ, —Å —á–µ–≥–æ –Ω–∞—á–Ω—ë–º.
