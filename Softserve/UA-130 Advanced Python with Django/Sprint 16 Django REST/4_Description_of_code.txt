–û—Ç–ª–∏—á–Ω–æ! –ü—Ä–æ–¥–æ–ª–∂–∞—é –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ä–∞–∑–±–æ—Ä –≤—Å–µ–≥–æ, —á—Ç–æ –º—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏. –í –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö —è —É–∂–µ –ø–æ–¥—Ä–æ–±–Ω–æ –æ–±—ä—è—Å–Ω–∏–ª:

* –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è (`serializers.py`)
* –∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω—ã `UserViewSet`, `OrderViewSet`, `BookViewSet`, `AuthorViewSet`
* —á—Ç–æ —Ç–∞–∫–æ–µ `routers` –∏ `nested_routers`
* –∫–∞–∫ –º–∞—Ä—à—Ä—É—Ç—ã —Å–≤—è–∑–∞–Ω—ã —Å `ViewSet'–∞–º–∏`

–¢–µ–ø–µ—Ä—å —è –ø—Ä–æ–¥–æ–ª–∂—É —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª:

---

### üîÅ **urls.py ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤**

–ú—ã —Ä–∞–±–æ—Ç–∞–ª–∏ —Å `urls.py`, —á—Ç–æ–±—ã —Å–≤—è–∑–∞—Ç—å URL-–∞–¥—Ä–µ—Å–∞ —Å –Ω–∞—à–∏–º–∏ `ViewSet`-–∞–º–∏.

#### –ü—Ä–∏–º–µ—Ä: `urls.py` (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ –≤ `api/urls.py`)

```python
from rest_framework_nested import routers
from authentication.views import UserViewSet
from order.views import OrderViewSet
from book.views import BookViewSet
from author.views import AuthorViewSet

# –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–æ—É—Ç–µ—Ä
router = routers.DefaultRouter()
router.register(r'user', UserViewSet, basename='user')
router.register(r'order', OrderViewSet, basename='order')
router.register(r'book', BookViewSet, basename='book')
router.register(r'author', AuthorViewSet, basename='author')

# –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Ä–æ—É—Ç–µ—Ä: user/{user_id}/order/
user_order_router = routers.NestedDefaultRouter(router, r'user', lookup='user')
user_order_router.register(r'order', OrderViewSet, basename='user-orders')

urlpatterns = router.urls + user_order_router.urls
```

üîç **–†–∞–∑–±–æ—Ä —Å—Ç—Ä–æ–∫:**

| –°—Ç—Ä–æ–∫–∞                             | –û–±—ä—è—Å–Ω–µ–Ω–∏–µ                                                                                                                |
| ---------------------------------- | ------------------------------------------------------------------------------------------------------------------------- |
| `routers.DefaultRouter()`          | –°–æ–∑–¥–∞—ë—Ç –æ—Å–Ω–æ–≤–Ω–æ–π REST API —Ä–æ—É—Ç–µ—Ä. –û–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –º–∞—Ä—à—Ä—É—Ç—ã (`GET /user/`, `POST /user/`, `GET /user/1/` –∏ —Ç.–¥.). |
| `router.register(...)`             | –°–≤—è–∑—ã–≤–∞–µ—Ç URL —Å `ViewSet`. –ù–∞–ø—Ä–∏–º–µ—Ä, `user` ‚Äî —ç—Ç–æ –ø—Ä–µ—Ñ–∏–∫—Å, `UserViewSet` ‚Äî –ª–æ–≥–∏–∫–∞.                                        |
| `routers.NestedDefaultRouter(...)` | –°–æ–∑–¥–∞—ë—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Ä–æ—É—Ç–µ—Ä. –ú—ã –≥–æ–≤–æ—Ä–∏–º: "—É –∫–∞–∂–¥–æ–≥–æ `user` –º–æ–∂–µ—Ç –±—ã—Ç—å `order`".                                              |
| `lookup='user'`                    | –£–∫–∞–∑—ã–≤–∞–µ—Ç, –ø–æ –∫–∞–∫–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É –∏—Å–∫–∞—Ç—å —Å–≤—è–∑—å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `kwargs['user_pk']` –≤–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–º `ViewSet`).                  |
| `user_order_router.register(...)`  | –¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è –ø–æ URL: `user/{user_id}/order/{order_id}/`.                                                    |

---

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `settings.py`

#### DRF –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```python
REST_FRAMEWORK = {
    'DEFAULT_RENDERER_CLASSES': (
        'rest_framework.renderers.JSONRenderer',  # –¢–æ–ª—å–∫–æ JSON
    ),
    'DEFAULT_PARSER_CLASSES': (
        'rest_framework.parsers.JSONParser',  # –¢–æ–ª—å–∫–æ JSON
    )
}
```

üîç **–†–∞–∑–±–æ—Ä:**

| –ö–ª—é—á                         | –ó–Ω–∞—á–µ–Ω–∏–µ                                                                 | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                                                                                  |
| ---------------------------- | ------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------- |
| `'DEFAULT_RENDERER_CLASSES'` | –°–ø–∏—Å–æ–∫ –∫–ª–∞—Å—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç Python ‚Üí JSON (–∏–ª–∏ HTML, XML –∏ —Ç.–ø.) | –ú—ã –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ `JSONRenderer`, —á—Ç–æ–±—ã –Ω–µ –∏—Å–∫–∞—Ç—å —à–∞–±–ª–æ–Ω—ã HTML, –∫–∞–∫ –≤ —Ç–≤–æ–µ–π –æ—à–∏–±–∫–µ `TemplateDoesNotExist` |
| `'DEFAULT_PARSER_CLASSES'`   | –°–ø–∏—Å–æ–∫ –ø–∞—Ä—Å–µ—Ä–æ–≤: –∫–∞–∫ –∏–∑ JSON –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –≤ Python                         | –û—Å—Ç–∞–≤–ª—è–µ–º `JSONParser`, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å Postman —á–∞—â–µ –≤—Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞–µ–º —Å JSON                                     |

---

### üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API —É —Ç–µ–±—è –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∞—è:

```
/api/v1/
‚îú‚îÄ‚îÄ user/
‚îÇ   ‚îú‚îÄ‚îÄ [GET, POST] - —Å–ø–∏—Å–æ–∫ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ {id}/ [GET, PUT, PATCH, DELETE] - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –æ–¥–Ω–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
‚îÇ   ‚îî‚îÄ‚îÄ {id}/order/ [GET, POST] - –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îú‚îÄ‚îÄ order/
‚îÇ   ‚îî‚îÄ‚îÄ {id}/ [GET, PUT, PATCH, DELETE] - —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∑–∞–∫–∞–∑–æ–º
‚îú‚îÄ‚îÄ book/
‚îÇ   ‚îî‚îÄ‚îÄ {id}/ [GET, PUT, PATCH, DELETE]
‚îî‚îÄ‚îÄ author/
    ‚îî‚îÄ‚îÄ {id}/ [GET, PUT, PATCH, DELETE]
```

---

### üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Postman

#### ‚úÖ Create (POST)

* `POST http://127.0.0.1:8000/api/v1/book/`
* –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):

```json
{
  "name": "Django Basics",
  "description": "Introduction to Django",
  "count": 5,
  "authors": [1]
}
```

#### üîé Read (GET)

* `GET http://127.0.0.1:8000/api/v1/book/1/`

#### ‚úèÔ∏è Update (PUT –∏–ª–∏ PATCH)

* `PUT http://127.0.0.1:8000/api/v1/book/1/`

```json
{
  "name": "Django Advanced",
  "description": "More about Django",
  "count": 10,
  "authors": [1]
}
```

#### ‚ùå Delete (DELETE)

* `DELETE http://127.0.0.1:8000/api/v1/book/1/`

---

### üöÄ –ß—Ç–æ –µ—â—ë –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

| –ß—Ç–æ                               | –ó–∞—á–µ–º                                                                       |
| --------------------------------- | --------------------------------------------------------------------------- |
| –î–æ–±–∞–≤–∏—Ç—å permissions              | –ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –∑–∞–∫–∞–∑—ã –º–æ–≥–ª–∏ –¥–µ–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ |
| –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é              | JWT –∏–ª–∏ TokenAuth                                                           |
| –ü–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ | –î–ª—è —É–¥–æ–±–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞                                              |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger              | –î–ª—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–ø–∏—Å–∞–Ω–∏—è API                                              |
| Unit-—Ç–µ—Å—Ç—ã                        | –ß—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç                                           |

---

–ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É:

* —Å–¥–µ–ª–∞—Ç—å —Ç–µ–±–µ Swagger (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —á–µ—Ä–µ–∑ `drf-spectacular` –∏–ª–∏ `drf-yasg`)
* –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
* –ø–æ–º–æ—á—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ GitHub –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ Render –∏–ª–∏ Railway

üîß –ü–∏—à–∏, —á–µ–º –∑–∞–Ω—è—Ç—å—Å—è –¥–∞–ª—å—à–µ –∏–ª–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å —á—Ç–æ-—Ç–æ –µ—â—ë.
