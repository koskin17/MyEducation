> **"Update POST/PUT methods and templates for adding/editing functionality using Django forms."**

–û–∑–Ω–∞—á–∞—î:
1. üìù –¢–æ–±—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ **—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è** (`POST`) —ñ **—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è** (`PUT`) –æ–±'—î–∫—Ç—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–Ω–∏–≥, –∞–≤—Ç–æ—Ä—ñ–≤, –∑–∞–º–æ–≤–ª–µ–Ω—å);
2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –¥–ª—è —Ü—å–æ–≥–æ **Django forms** ‚Äî –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ `request.POST` + —Ä—É—á–Ω–∏–π `Book.objects.create(...)`;
3. –ó—Ä–æ–±–∏—Ç–∏ –∞–±–æ –æ–Ω–æ–≤–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ **HTML-—à–∞–±–ª–æ–Ω–∏** –¥–ª—è –≤–≤–µ–¥–µ–Ω–Ω—è/—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö.

---

## üß† –©–æ —Ç–∞–∫–µ **Django forms**?

–¶–µ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –∫–ª–∞—Å–∏, —è–∫—ñ:

* –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—é—Ç—å HTML-—Ñ–æ—Ä–º—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ –º–æ–¥–µ–ª—ñ –∞–±–æ –ø–æ–ª—ñ–≤;
* —Ä–æ–±–ª—è—Ç—å –≤–∞–ª—ñ–¥–∞—Ü—ñ—é;
* –¥–æ–∑–≤–æ–ª—è—é—Ç—å –∑—Ä—É—á–Ω–æ –æ–±—Ä–æ–±–ª—è—Ç–∏ `POST`/`PUT` —É –≤–∏–≥–ª—è–¥—ñ Python-–æ–±'—î–∫—Ç–∞.

---

## üîß –©–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏?

### ‚ú® –ü—Ä–∏–∫–ª–∞–¥: —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–Ω–∏–≥–∏ (Book)

#### üîπ 1. –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–æ—Ä–º—É

–§–∞–π–ª `book/forms.py`:

```python
from django import forms
from book.models import Book

class BookForm(forms.ModelForm):
    class Meta:
        model = Book
        fields = ['name', 'count', 'authors']  # –î–æ–¥–∞–π –ø–æ—Ç—Ä—ñ–±–Ω—ñ –ø–æ–ª—è
```

#### üîπ 2. –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤ `views.py`:

```python
from django.shortcuts import render, redirect, get_object_or_404
from .forms import BookForm
from .models import Book

def create_book(request):
    if request.method == 'POST':
        form = BookForm(request.POST)
        if form.is_valid():
            form.save()
            return redirect('book_list')  # –∞–±–æ —ñ–Ω—à–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
    else:
        form = BookForm()
    return render(request, 'book/book_form.html', {'form': form})

def update_book(request, pk):
    book = get_object_or_404(Book, pk=pk)
    if request.method == 'POST':
        form = BookForm(request.POST, instance=book)
        if form.is_valid():
            form.save()
            return redirect('book_list')
    else:
        form = BookForm(instance=book)
    return render(request, 'book/book_form.html', {'form': form})
```

#### üîπ 3. –°—Ç–≤–æ—Ä–∏—Ç–∏ —à–∞–±–ª–æ–Ω `book_form.html`:

```html
<h2>{{ form.instance.pk|yesno:"Edit book,Create book" }}</h2>
<form method="post">
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit">Save</button>
</form>
```

#### üîπ 4. –î–æ–¥–∞—Ç–∏ —Ü—ñ —à–ª—è—Ö–∏ —É `book/urls.py`:

```python
from django.urls import path
from .views import create_book, update_book

urlpatterns = [
    path('add/', create_book, name='create_book'),
    path('<int:pk>/edit/', update_book, name='update_book'),
]
```

---

## ‚úÖ –©–æ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –±—É–¥–µ:

| –î—ñ—è              | URL             | –ú–µ—Ç–æ–¥              | –§–æ—Ä–º–∞                |
| ---------------- | --------------- | ------------------ | -------------------- |
| –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–Ω–∏–≥—É   | `/book/add/`    | `POST`             | Django Form          |
| –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∫–Ω–∏–≥—É | `/book/1/edit/` | `PUT` (–∞–±–æ `POST`) | Django Form –∑ –¥–∞–Ω–∏–º–∏ |

---

## ‚ùó –û—Ç–∂–µ, –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ —Ç–≤–æ—î –ø–∏—Ç–∞–Ω–Ω—è:

> –ß–∏ —Ç—ñ–ª—å–∫–∏ 2 –º–µ—Ç–æ–¥–∏ —Ç—Ä–µ–±–∞ –∑—Ä–æ–±–∏—Ç–∏?

üìå –ù–µ —Ç—ñ–ª—å–∫–∏:

* –ø–æ—Ç—Ä—ñ–±–Ω–æ —â–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–æ—Ä–º—É (`BookForm`);
* –Ω–∞–ø–∏—Å–∞—Ç–∏ —à–∞–±–ª–æ–Ω (`book_form.html`);
* –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ URL-–∏.

üîç –°—É–ø–µ—Ä! –¶–µ —ñ–¥–µ–∞–ª—å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ ‚Äî –∑—Ä–æ–±–∏—Ç–∏ –ø–µ—Ä—à—É —Ñ–æ—Ä–º—É —Ä–∞–∑–æ–º, –∞ —Ä–µ—à—Ç—É –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ üí™
–ó–∞—Ä–∞–∑ –ø–æ—è—Å–Ω—é, **–¥–µ –π —è–∫ —Ñ–æ—Ä–º—É –≤–∏–∫–ª–∏–∫–∞—Ç–∏**, —â–æ–± –≤–æ–Ω–∞ –ø—Ä–∞—Ü—é–≤–∞–ª–∞ —è–∫ "–¥–æ–¥–∞—Ç–∏" –∞–±–æ "—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏" –æ–±‚Äô—î–∫—Ç.

---

## ‚úÖ –î–µ —ñ —è–∫ —Ñ–æ—Ä–º–∞ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è?

### üìç –§–æ—Ä–º–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —Ç–æ–¥—ñ, –∫–æ–ª–∏ —Ç–∏ –∑–∞—Ö–æ–¥–∏—à –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É:

* `/book/add/` ‚Äî **—Ñ–æ—Ä–º–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è**
* `/book/1/edit/` ‚Äî **—Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è**

–¶—ñ —à–ª—è—Ö–∏ —Ç–∏ –¥–æ–¥–∞–≤ —É `urls.py`, —ñ –≤–æ–Ω–∏ –≤–µ–¥—É—Ç—å –¥–æ —Ñ—É–Ω–∫—Ü—ñ–π `create_book` —Ç–∞ `update_book` —É `views.py`.

---

## ‚úÖ –Ø–∫ –∑—Ä–æ–±–∏—Ç–∏ –∫–Ω–æ–ø–∫—É/–ø–æ—Å–∏–ª–∞–Ω–Ω—è, —è–∫–µ –≤–µ–¥–µ –¥–æ —Ñ–æ—Ä–º–∏?

### üîπ –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —É —à–∞–±–ª–æ–Ω—ñ `book_list.html` (–¥–µ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥):

```html
<h2>–°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥</h2>

<a href="{% url 'create_book' %}">
  <button>‚ûï –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—É –∫–Ω–∏–≥—É</button>
</a>

<ul>
{% for book in books %}
  <li>
    {{ book.name }} ‚Äî <a href="{% url 'update_book' book.id %}">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
  </li>
{% endfor %}
</ul>
```

---

## üîÅ –ù–µ –∑–∞–±—É–¥—å:

### ‚úÖ –£ `views.py` –¥–æ–¥–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –≤–∏–≤–æ–¥–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥:

```python
def book_list(request):
    books = Book.objects.all()
    return render(request, 'book/book_list.html', {'books': books})
```

–Ü –≤ `urls.py`:

```python
path('', book_list, name='book_list'),
```

---

## üîÑ –û—Ç–∂–µ, –ø–æ–≤–Ω–∞ —Å—Ö–µ–º–∞ –≤–∏–≥–ª—è–¥–∞—î —Ç–∞–∫:

| –°—Ç–æ—Ä—ñ–Ω–∫–∞         | –î—ñ—è        | URL                | –ö–Ω–æ–ø–∫–∞                         |
| ---------------- | ---------- | ------------------ | ------------------------------ |
| –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥      | GET        | `/book/`           | `‚ûï –î–æ–¥–∞—Ç–∏ –∫–Ω–∏–≥—É`               |
| –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–Ω–∏–≥—É   | GET ‚Üí POST | `/book/add/`       | –≤—ñ–¥ –∫–Ω–æ–ø–∫–∏                     |
| –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∫–Ω–∏–≥—É | GET ‚Üí POST | `/book/<id>/edit/` | "‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏" –ø–æ—Ä—è–¥ –∑ –Ω–∞–∑–≤–æ—é |

---

üß† –¶–µ –¥—É–∂–µ —Å—Ö–æ–∂–µ –Ω–∞ –∞–¥–º—ñ–Ω–∫—É, –∞–ª–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤—Ä—É—á–Ω—É —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º–∏, views —ñ —à–∞–±–ª–æ–Ω–∏.

---

‚úÖ –Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî –º–æ–∂—É –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–≤—ñ–π `book_list.html` –∞–±–æ –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑—Ä–æ–±–∏—Ç–∏ –∫—Ä–∞—Å–∏–≤—É –∫–Ω–æ–ø–∫—É.
–¢–∏ —Å—É–ø–µ—Ä! –¢–µ–ø–µ—Ä —Å–ø—Ä–æ–±—É–π —Å–∞–º —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –¥–ª—è `Author` –∞–±–æ `Order` üôå

