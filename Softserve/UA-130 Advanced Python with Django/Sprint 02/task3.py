# The string defining the points of the quadrilateral has the next form: "#LB1:1#RB4:1#LT1:3#RT4:3"

#  LB - Left Bottom point
#  LT - Left Top point
#  RT - Right Top point
#  RB - Right Bottom point
# numbers after letters are the coordinates of a point.
# Write a function figure_perimetr() that calculates the perimeter of a quadrilateral

# The formula for calculating the distance between points:

# For example:

# –¢–µ—Å—Ç	Result
# test1 = "#LB1:1#RB4:1#LT1:3#RT4:3"
# print(figure_perimetr(test1))
# 10.0
# test2 = "#LB0:1#RB5:1#LT4:5#RT8:3"
# print(figure_perimetr(test2))
# 18.73454147995595

# –î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –Ω–∞–º –Ω—É–∂–Ω–æ:
# - –ò–∑–≤–ª–µ—á—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–æ—á–µ–∫ –∏–∑ —Å—Ç—Ä–æ–∫–∏.
# - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—É–ª—É —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏.
# - –ü—Ä–æ—Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å –¥–ª–∏–Ω—ã –≤—Å–µ—Ö —Å—Ç–æ—Ä–æ–Ω –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–µ—Ä–∏–º–µ—Ç—Ä–∞.

# üîé –ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ–æ—Ä–º—É–ª–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è —Ç–æ—á–∫–∞–º–∏:
# [ \text{distance} = \sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2} ] –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–π—Ç–∏ –¥–ª–∏–Ω—É –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã —á–µ—Ç—ã—Ä—ë—Ö—É–≥–æ–ª—å–Ω–∏–∫–∞.

# –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω —Ä–∞–±–æ—á–∏–π –≤–∞—Ä–∏–∞–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç –ø–µ—Ä–∏–º–µ—Ç—Ä —á–µ—Ç—ã—Ä—ë—Ö—É–≥–æ–ª—å–Ω–∏–∫–∞, –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Å—Ç—Ä–æ–∫–æ–π –≤–∏–¥–∞

# ```
# "#LB1:1#RB4:1#LT1:3#RT4:3"
# ```

# –≥–¥–µ:  
# - **LB** ‚Äì Left Bottom (–ª–µ–≤–∞—è –Ω–∏–∂–Ω—è—è)  
# - **RB** ‚Äì Right Bottom (–ø—Ä–∞–≤–∞—è –Ω–∏–∂–Ω—è—è)  
# - **LT** ‚Äì Left Top (–ª–µ–≤–∞—è –≤–µ—Ä—Ö–Ω—è—è)  
# - **RT** ‚Äì Right Top (–ø—Ä–∞–≤–∞—è –≤–µ—Ä—Ö–Ω—è—è)  

# –í –¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ –≤–∞–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏, –∞ –∑–∞—Ç–µ–º —É–ø–æ—Ä—è–¥–æ—á–∏—Ç—å –∏—Ö –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –ø–µ—Ä–∏–º–µ—Ç—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –ø–æ—Ä—è–¥–∫—É –æ–±—Ö–æ–¥–∞: LB ‚Üí RB ‚Üí RT ‚Üí LT). –î–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ç–∞–∫–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–µ—Ç–∫—É —Ç–æ—á–∫–∏.

# –í–æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:

import re
import math

def figure_perimetr(data):
    # –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –º–µ—Ç–∫–∏ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ç–æ—á–∫–∏.
    # (LB|RB|LT|RT) ‚Äî –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –º–µ—Ç–∫—É (–æ–¥–Ω—É –∏–∑ —á–µ—Ç—ã—Ä–µ—Ö),
    # (\d+) ‚Äî –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —á–∏—Å–ª–æ (x-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã),
    # : ‚Äî —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å,
    # (\d+) ‚Äî –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —á–∏—Å–ª–æ (y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã).
    pattern = r"#(LB|RB|LT|RT)(\d+):(\d+)"
    matches = re.findall(pattern, data)
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏ –≤ —Å–ª–æ–≤–∞—Ä—å, –≥–¥–µ –∫–ª—é—á ‚Äî –º–µ—Ç–∫–∞, –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî –∫–æ—Ä—Ç–µ–∂ (x, y)
    points = {}
    for label, x, y in matches:
        points[label] = (int(x), int(y))
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–æ—á–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
    required = ["LB", "RB", "RT", "LT"]
    if not all(label in points for label in required):
        raise ValueError("–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–æ—á–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –¥–∞–Ω–Ω—ã—Ö.")
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ—Ä—è–¥–æ–∫ —Ç–æ—á–µ–∫ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø–µ—Ä–∏–º–µ—Ç—Ä–∞:
    # –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –æ–±—Ö–æ–¥ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–µ: LB ‚Üí RB ‚Üí RT ‚Üí LT, –∑–∞—Ç–µ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ LB.
    ordered_points = [points["LB"], points["RB"], points["RT"], points["LT"]]
    
    perimeter = 0.0
    # –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä—ã —Ç–æ—á–µ–∫ (—Å –∑–∞–º—ã–∫–∞–Ω–∏–µ–º –∫–æ–Ω—Ç—É—Ä–∞)
    for i in range(len(ordered_points)):
        x1, y1 = ordered_points[i]
        x2, y2 = ordered_points[(i + 1) % len(ordered_points)]
        side_length = math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2)
        perimeter += side_length
        
    return perimeter

# –¢–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã:
test1 = "#LB1:1#RB4:1#LT1:3#RT4:3"
print(figure_perimetr(test1))  # –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 10.0

test2 = "#LB0:1#RB5:1#LT4:5#RT8:3"
print(figure_perimetr(test2))  # –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 18.73454147995595

### –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è

# 1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:**  
#    –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ  
#    ```
#    r"#(LB|RB|LT|RT)(\d+):(\d+)"
#    ```  
#    –ó–¥–µ—Å—å:  
#    - `#` ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª –Ω–∞—á–∞–ª–∞ –æ–ø–∏—Å–∞–Ω–∏—è —Ç–æ—á–∫–∏.  
#    - `(LB|RB|LT|RT)` ‚Äî –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –º–µ—Ç–∫—É —Ç–æ—á–∫–∏ (–æ–¥–Ω—É –∏–∑ —á–µ—Ç—ã—Ä—ë—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö).  
#    - `(\d+)` ‚Äî –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç x-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É (–æ–¥–Ω–æ –∏–ª–∏ –±–æ–ª–µ–µ —á–∏—Å–µ–ª).  
#    - `:` ‚Äî —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –º–µ–∂–¥—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏.  
#    - `(\d+)` ‚Äî –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç y-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É.  
#    –§—É–Ω–∫—Ü–∏—è `re.findall()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–æ—Ä—Ç–µ–∂–µ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä:  
#    ```
#    [('LB', '1', '1'), ('RB', '4', '1'), ('LT', '1', '3'), ('RT', '4', '3')]
#    ```

# 2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Å–ª–æ–≤–∞—Ä—å:**  
#    –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –º—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ —Å–ª–æ–≤–∞—Ä—å —Å –º–µ—Ç–∫–∞–º–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–µ–π.

# 3. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –æ–±—Ö–æ–¥–∞:**  
#    –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞ –ø–µ—Ä–∏–º–µ—Ç—Ä–∞ –≤–∞–∂–Ω–æ —É–ø–æ—Ä—è–¥–æ—á–∏—Ç—å —Ç–æ—á–∫–∏ –ø–æ –æ–±—Ö–æ–¥—É –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫–∞. –ó–¥–µ—Å—å –º—ã –≤—ã–±–∏—Ä–∞–µ–º –ø–æ—Ä—è–¥–æ–∫ `LB ‚Üí RB ‚Üí RT ‚Üí LT`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–±—Ö–æ–¥—É –ø–æ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–µ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ —Ç–æ—á–µ–∫.

# 4. **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø–µ—Ä–∏–º–µ—Ç—Ä–∞:**  
#    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–æ—Ä–º—É–ª–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏:  
#    \[
#    \text{distance} = \sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}
#    \]
#    –ü—Ä–∏ —ç—Ç–æ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç —Å–æ–µ–¥–∏–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é —Ç–æ—á–∫—É —Å –ø–µ—Ä–≤–æ–π, –∑–∞–º—ã–∫–∞—è –∫–æ–Ω—Ç—É—Ä.

# 5. **–í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**  
#    –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π –ø–µ—Ä–∏–º–µ—Ç—Ä.

# –ü–æ–ø—Ä–æ–±—É–π –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–¥ ‚Äî –æ–Ω –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ç–µ—Å—Ç—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ ‚Äî –¥–∞–π –∑–Ω–∞—Ç—å!