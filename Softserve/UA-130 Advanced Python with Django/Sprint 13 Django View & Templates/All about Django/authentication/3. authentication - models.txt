–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ! –¢–≤–æ—è –º–æ–¥–µ–ª—å `CustomUser` ‚Äî —Ü–µ **–∫–∞—Å—Ç–æ–º–Ω–∞ (—Å–≤–æ—è) –º–æ–¥–µ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**, —è–∫–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –∑–∞–º—ñ–Ω—é—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É `User` –≤ Django. –¶–µ —Å–µ—Ä–π–æ–∑–Ω–∞, –∞–ª–µ –¥—É–∂–µ –≥–Ω—É—á–∫–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è üëè

–ó–∞—Ä–∞–∑ —è –ø–æ—è—Å–Ω—é —ó—ó **–ø–æ–µ—Ç–∞–ø–Ω–æ —Ç–∞ –¥—É–∂–µ –ø—Ä–æ—Å—Ç–æ**.

---

## üß± 1. üì¶ **–û–ø–∏—Å –º–æ–¥–µ–ª—ñ `CustomUser`**

```python
class CustomUser(AbstractBaseUser):
```

* –ù–∞—Å–ª—ñ–¥—É—î `AbstractBaseUser`, —Ç–æ–±—Ç–æ **–ø–æ–≤–Ω—ñ—Å—Ç—é –∫–∞—Å—Ç–æ–º–Ω–∞** –º–æ–¥–µ–ª—å.
* –¢–∏ —Å–∞–º –∑–∞–¥–∞—î—à –ø–æ–ª—è, –ø—Ä–∞–≤–∏–ª–∞ –≤—Ö–æ–¥—É, –ª–æ–≥—ñ–∫—É.

---

## üìå 2. üî¢ **–ü–æ–ª—è**

| –ü–æ–ª–µ           | –¢–∏–ø                   | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è                    |
| -------------- | --------------------- | ------------------------------ |
| `first_name`   | `CharField(max=20)`   | –Ü–º'—è                           |
| `last_name`    | `CharField(max=20)`   | –ü—Ä—ñ–∑–≤–∏—â–µ                       |
| `middle_name`  | `CharField(max=20)`   | –ü–æ –±–∞—Ç—å–∫–æ–≤—ñ                    |
| `email`        | `EmailField(unique)`  | –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π –ª–æ–≥—ñ–Ω –¥–ª—è –≤—Ö–æ–¥—É     |
| `password`     | `CharField(max=255)`  | –ü–∞—Ä–æ–ª—å (–∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —Ö–µ—à–æ–≤–∞–Ω–æ) |
| `created_at`   | `DateTimeField(auto)` | –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è                 |
| `updated_at`   | `DateTimeField(auto)` | –î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è                 |
| `role`         | `IntegerField`        | `0` ‚Äî –≥—ñ—Å—Ç—å, `1` ‚Äî –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞—Ä |
| `is_active`    | `BooleanField`        | –î–æ—Å—Ç—É–ø –¥–æ –∞–∫–∞—É–Ω—Ç–∞              |
| `is_staff`     | `BooleanField`        | –î–æ—Å—Ç—É–ø –¥–æ –∞–¥–º—ñ–Ω–ø–∞–Ω–µ–ª—ñ          |
| `is_superuser` | `BooleanField`        | –ü–æ–≤–Ω—ñ –ø—Ä–∞–≤–∞                    |
| `id`           | `AutoField`           | –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä       |

---

## üß© 3. üîë **EMAIL —è–∫ –ª–æ–≥—ñ–Ω**

```python
USERNAME_FIELD = 'email'
```

üîπ Django –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `email` –∑–∞–º—ñ—Å—Ç—å `username` –¥–ª—è –≤—Ö–æ–¥—É.

---

## üë∑ 4. üîß **–ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ ‚Äî `CustomUserManager`**

–¶–µ –∫–ª–∞—Å, —è–∫–∏–π —Å—Ç–≤–æ—Ä—é—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:

```python
def create_user(self, email, password, **extra_fields):
```

* –°—Ç–≤–æ—Ä—é—î –∑–≤–∏—á–∞–π–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞—Ä—è —á–∏ –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á–∞).

```python
def create_superuser(self, email, password, **extra_fields):
```

* –°—Ç–≤–æ—Ä—é—î —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è –∞–¥–º—ñ–Ω–∫–∏.

---

## üõ†Ô∏è 5. üìö **–î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–µ—Ç–æ–¥–∏**

| –ú–µ—Ç–æ–¥                          | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è                                     |
| ------------------------------ | ----------------------------------------------- |
| `__str__()`                    | –ü–æ–≤–µ—Ä—Ç–∞—î —Ç–µ–∫—Å—Ç–æ–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞    |
| `get_by_id(id)`                | –ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ø–æ ID                         |
| `get_by_email(email)`          | –ü–æ—à—É–∫ –ø–æ email                                  |
| `delete_by_id(id)`             | –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞                           |
| `create(...)`                  | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞             |
| `to_dict()`                    | –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è —É –≤–∏–≥–ª—è–¥—ñ —Å–ª–æ–≤–Ω–∏–∫–∞ (–¥–ª—è JSON)     |
| `update(...)`                  | –û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞                     |
| `get_all()`                    | –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤                      |
| `get_role_name()`              | –ü–æ–≤–µ—Ä—Ç–∞—î –Ω–∞–∑–≤—É —Ä–æ–ª—ñ (`visitor` –∞–±–æ `librarian`) |
| `has_perm`, `has_module_perms` | –î–ª—è —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ –∑ Django Admin                   |

---

## üî• –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

‚úÖ –í–ª–∞—Å–Ω–∞ –º–æ–¥–µ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ‚Äî —Ü–µ –≥–Ω—É—á–∫—ñ—Å—Ç—å:
–¢–∏ —Å–∞–º –∫–µ—Ä—É—î—à —Ä–æ–ª—è–º–∏, –¥–æ–∑–≤–æ–ª–∞–º–∏, –ª–æ–≥—ñ–∫–æ—é —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó, –ø–æ–ª—è–º–∏.

‚ùó –ê–ª–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –Ω–µ –∑–∞–±—É–≤–∞—Ç–∏:

* –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `user.set_password(...)` –¥–ª—è —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤.
* –£ –º–µ—Ç–æ–¥—ñ `update(...)` —É —Ç–µ–±–µ –ø–∞—Ä–æ–ª—å –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è *–±–µ–∑ —Ö–µ—à—É–≤–∞–Ω–Ω—è*! –¶–µ **–Ω–µ–±–µ–∑–ø–µ—á–Ω–æ**.

---

## üß† –ü—ñ–¥—Å—É–º–æ–∫

–ú–æ–¥–µ–ª—å `CustomUser` –∑–∞–º—ñ–Ω—é—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É –º–æ–¥–µ–ª—å Django. –í–æ–Ω–∞ –¥–æ–∑–≤–æ–ª—è—î:

* –í—Ö–æ–¥–∏—Ç–∏ –ø–æ email,
* –†–æ–∑–¥—ñ–ª—è—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –Ω–∞ **–≥–æ—Å—Ç–µ–π** —ñ **–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞—Ä—ñ–≤** (`role`),
* –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–æ–≤–Ω—É CRUD-–ª–æ–≥—ñ–∫—É –ø—Ä—è–º–æ –≤ –º–æ–¥–µ–ª—ñ,
* –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–∞—Å—Ç–æ–º–Ω—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏.

---

üîú –ù–∞—Å—Ç—É–ø–Ω–∏–º –∫—Ä–æ–∫–æ–º –º–æ–∂–µ–º–æ —Ä–æ–∑—ñ–±—Ä–∞—Ç–∏ —à–∞–±–ª–æ–Ω–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `login.html`, `profile.html`) –∞–±–æ –ø–µ—Ä–µ–π—Ç–∏ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `book` —á–∏ `author`).

–©–æ —Ç–æ–±—ñ —Ü—ñ–∫–∞–≤—ñ—à–µ –∑–∞—Ä–∞–∑? üòä
