üß† –ß—É–¥–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è ‚Äî –æ–¥–Ω–µ –∑ —Ç–∏—Ö, —â–æ –ø–æ–∫–∞–∑—É—î –≥–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –Ω–µ –ø—Ä–æ—Å—Ç–æ ¬´—è–∫ –∑—Ä–æ–±–∏—Ç–∏¬ª, –∞ **—á–æ–º—É —Ç–∞–∫ –ø—Ä–∞—Ü—é—î**.

---

## üîç –ö–æ—Ä–æ—Ç–∫–æ: –ó–∞—á–µ–º –Ω—É–∂–µ–Ω `BaseUserManager`?

–ú–∏ —ñ–º–ø–æ—Ä—Ç—É—î–º–æ `BaseUserManager`, —â–æ–± **—Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–∞—Å—Ç–æ–º–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –º–æ–¥–µ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**, —è–∫–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–æ–±–ª—è—î:

* —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–≤–∏—á–∞–π–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (`create_user`)
* —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (`create_superuser`)
* –Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—é email
* —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—è

---

### üìç –Ü–º–ø–æ—Ä—Ç:

```python
from django.contrib.auth.models import BaseUserManager
```

---

## üìå –ê —á—Ç–æ –¥–µ–ª–∞–µ—Ç `BaseUserManager`?

–¶–µ **–±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –∫–ª–∞—Å**, —è–∫–∏–π –¥–∞—î –∑—Ä—É—á–Ω—É –æ—Å–Ω–æ–≤—É –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫–∞—Å—Ç–æ–º–Ω–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

–ö–æ–ª–∏ —Ç–∏ —Å—Ç–≤–æ—Ä—é—î—à **—Å–≤–æ—é** –º–æ–¥–µ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–∞ –Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É Django `User`), —Ç–∏ **–∑–æ–±–æ–≤'—è–∑–∞–Ω–∏–π** –Ω–∞–¥–∞—Ç–∏ Django —Å–ø–æ—Å—ñ–± —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

---

## ‚úÖ –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

| –ë–µ–∑ `BaseUserManager`                                           | –° `BaseUserManager`                        |
| --------------------------------------------------------------- | ------------------------------------------ |
| –ü–æ—Ç—Ä—ñ–±–Ω–æ —Å–∞–º–æ–º—É —Ä–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ `set_password`, `normalize_email` | –£–∂–µ –≤—Å–µ —î —É –Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–æ–º—É –∫–ª–∞—Å—ñ            |
| Django –Ω–µ –∑–Ω–∞—Ç–∏–º–µ, —è–∫ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞               | –í—Å–µ –ø—Ä–∞—Ü—é—î —á–µ—Ä–µ–∑ `createsuperuser`         |
| –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–º (–±–µ–∑ —Ö–µ—à—É)          | `set_password()` –≥–∞—Ä–∞–Ω—Ç—É—î —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—è |
| –ù–µ–º–∞—î –∫—Ä–∞—â–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫                                            | –î–æ—Ç—Ä–∏–º—É—î—à—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ñ–≤ Django              |

---

### üîß –©–æ –¥–∞—î `BaseUserManager` ¬´–∑ –∫–æ—Ä–æ–±–∫–∏¬ª:

| –ú–µ—Ç–æ–¥                    | –©–æ —Ä–æ–±–∏—Ç—å                             |
| ------------------------ | ------------------------------------- |
| `normalize_email()`      | –ü—Ä–∏–≤–æ–¥–∏—Ç—å email –¥–æ –Ω–∏–∂–Ω—å–æ–≥–æ —Ä–µ–≥—ñ—Å—Ç—Ä—É  |
| `set_password()`         | –•–µ—à—É—î –ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ `AbstractBaseUser` |
| `make_random_password()` | –°—Ç–≤–æ—Ä—é—î –≤–∏–ø–∞–¥–∫–æ–≤–∏–π –ø–∞—Ä–æ–ª—å             |

---

### üîß –ù–∞—à –∫–æ–¥:

```python
class UserProfileManager(BaseUserManager):
    def create_user(self, email, password, **extra_fields):
        if not email:
            raise ValueError("Email is required")
        email = self.normalize_email(email)
        user = self.model(email=email, **extra_fields)
        user.set_password(password)  # –≤–∞–∂–ª–∏–≤–æ: –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–∞—Ä–æ–ª—å —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ
        user.save(using=self._db)
        return user

    def create_superuser(self, email, password, **extra_fields):
        extra_fields.setdefault('is_staff', True)
        extra_fields.setdefault('is_superuser', True)
        return self.create_user(email, password, **extra_fields)
```

---

## üß† –ë–µ–∑ `BaseUserManager` —Ü–µ–π –∫–æ–¥ –±—É–≤ –±–∏:

* **–±—ñ–ª—å—à –≥—Ä–æ–º—ñ–∑–¥–∫–∏–º**
* **–Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–º**
* **–Ω–µ—Å—É–º—ñ—Å–Ω–∏–º –∑ Django createsuperuser**
* **–Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∏–º –∑ best practices**

---

## üß™ –û–±–æ–≤'—è–∑–∫–æ–≤—ñ—Å—Ç—å –≤ –∫–∞—Å—Ç–æ–º–Ω–∏—Ö User-–º–æ–¥–µ–ª—è—Ö

–£ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó Django –Ω–∞–ø–∏—Å–∞–Ω–æ:

> ‚ÄúIf you‚Äôre using a custom user model, you must define a custom manager that inherits from `BaseUserManager`‚Ä¶‚Äù

üìö –î–∂–µ—Ä–µ–ª–æ: [Django Custom User Model docs](https://docs.djangoproject.com/en/stable/topics/auth/customizing/#writing-a-manager-for-a-custom-user-model)

---

## ‚úÖ –í–∏—Å–Ω–æ–≤–æ–∫

–ú–∏ —ñ–º–ø–æ—Ä—Ç—É—î–º–æ `BaseUserManager`, —Ç–æ–º—É —â–æ:

* –¶–µ **–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫–∞—Å—Ç–æ–º–Ω–∏–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏**
* –í—ñ–Ω –Ω–∞–¥–∞—î –∑—Ä—É—á–Ω—ñ –π –±–µ–∑–ø–µ—á–Ω—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ email —ñ –ø–∞—Ä–æ–ª—è
* Django **–≤–∏–º–∞–≥–∞—î** –π–æ–≥–æ –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ `AbstractBaseUser`
* –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ `createsuperuser` –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∫–æ—Ä–µ–∫—Ç–Ω–æ

---

üîÅ –Ø–∫—â–æ —Ö–æ—á–µ—à ‚Äî —è –º–æ–∂—É –ø–æ–∫–∞–∑–∞—Ç–∏, —è–∫ –∑–º—ñ–Ω–∏—Ç–∏ –º–µ–Ω–µ–¥–∂–µ—Ä —Ç–∞–∫, —â–æ–±, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ª–æ–≥—ñ–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞–ª–µ–∂–∞–ª–∞ –≤—ñ–¥ —Ä–æ–ª—ñ –∞–±–æ —â–æ–± —Ç–µ–ª–µ—Ñ–æ–Ω –±—É–≤ –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–º.
