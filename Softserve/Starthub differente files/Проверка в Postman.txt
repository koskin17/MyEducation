–ê–≥–∞, —Ç–µ–ø–µ—Ä—å –≤—Å—ë –ø–æ–Ω—è—Ç–Ω–æ üëç
–û—à–∏–±–∫–∞ **`relation "users_userrole" does not exist`** –∏ **`relation "users_userprofile" does not exist`** –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ —É —Ç–µ–±—è **–µ—â—ë –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏** –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è `users` (–∏ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç–æ–∂–µ).

Django –ø—Ä–æ—Å—Ç–æ –Ω–µ –≤–∏–¥–∏—Ç —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î, –ø–æ—ç—Ç–æ–º—É —Ç—ã –∏ –Ω–µ –º–æ–∂–µ—à—å –Ω–∏ —Å–æ–∑–¥–∞—Ç—å —Ä–æ–ª–∏, –Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

### üöÄ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π:

1. **–û—Å—Ç–∞–Ω–æ–≤–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π):**

```bash
docker compose down
```

2. **–°–¥–µ–ª–∞–π –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:**

```bash
docker compose exec web python manage.py makemigrations
docker compose exec web python manage.py migrate
```

> –≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—ã `users_userrole`, `users_userprofile`, `profiles_startupprofile`, `profiles_investorprofile`, `projects_startupproject` –∏ —Ç.–¥.

3. **–¢–µ–ø–µ—Ä—å –∑–∞—Ö–æ–¥–∏ –≤ shell –∏ –≤—ã–ø–æ–ª–Ω—è–π —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.**

---

### üìú –ì–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è shell (–ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–π)

–í—ã–ø–æ–ª–Ω—è–π **–ø–æ—Å—Ç—Ä–æ—á–Ω–æ**, –Ω–µ –≤—Å—Ç–∞–≤–ª—è–π –≤—Å—ë —Ä–∞–∑–æ–º:

```python
from users.models import UserRole, UserProfile
from profiles.models import StartupProfile, InvestorProfile
from projects.models import StartupProject, SavedProject

# 1. –°–æ–∑–¥–∞—ë–º —Ä–æ–ª–∏
startup_role, _ = UserRole.objects.get_or_create(role="startup")
investor_role, _ = UserRole.objects.get_or_create(role="investor")
print("Roles:", startup_role, investor_role)

# 2. –°–æ–∑–¥–∞—ë–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
s_user = UserProfile.objects.create_user(
    email="startup@example.com",
    username="startup1",
    password="TestPass123!",
    first_name="John",
    last_name="Doe"
)
i_user = UserProfile.objects.create_user(
    email="investor@example.com",
    username="investor1",
    password="TestPass123!",
    first_name="Alice",
    last_name="Smith"
)

# 3. –ù–∞–∑–Ω–∞—á–∞–µ–º —Ä–æ–ª–∏
s_user.role = startup_role
s_user.is_active = True
s_user.save()

i_user.role = investor_role
i_user.is_active = True
i_user.save()
print("Users created:", s_user.id, i_user.id)

# 4. –°–æ–∑–¥–∞—ë–º –ø—Ä–æ—Ñ–∏–ª–∏
sp = StartupProfile.objects.create(user=s_user, company_name="Test Startup")
ip = InvestorProfile.objects.create(user=i_user, company_name="Investor Ventures")
print("Profiles created:", sp.id, ip.id)

# 5. –°–æ–∑–¥–∞—ë–º –ø—Ä–æ–µ–∫—Ç
proj = StartupProject.objects.create(
    subject="AI Analytics Platform",
    idea="We analyze big data with AI",
    description="A SaaS platform for predictive analytics",
    website="https://startup.example.com",
    investment_needed=True,
    status="PENDING",
    startup=sp
)
print("Project created:", proj.id, proj.subject, "views_count:", proj.views_count)

# 6. –ò–Ω–≤–µ—Å—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ–µ–∫—Ç
saved = SavedProject.objects.create(investor=ip, project=proj)
print("SavedProject created:", saved.id)
```

–ü–æ–Ω—è–ª üëç
–û—à–∏–±–∫–∞ `"detail": "Method 'POST' not allowed."` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤ —Ç–≤–æ—ë–º `SavedProjectViewSet` **–Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ POST**.
–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —É —Ç–µ–±—è –≤ `views.py` —Ç–∞–∫:

```python
class SavedProjectViewSet(viewsets.ReadOnlyModelViewSet):
    queryset = SavedProject.objects.all()
    serializer_class = SavedProjectSerializer
```

üëâ `ReadOnlyModelViewSet` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ `list` –∏ `retrieve`.
–ü–æ—ç—Ç–æ–º—É POST (—Å–æ–∑–¥–∞–Ω–∏–µ) —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –±—É–¥–µ—Ç.

---

## ‚úÖ –ö–∞–∫ –ø–æ—á–∏–Ω–∏—Ç—å

–ß—Ç–æ–±—ã –≤ Postman –º–æ–∂–Ω–æ –±—ã–ª–æ **—Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–æ–µ–∫—Ç –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–º**, –Ω—É–∂–Ω–æ:

1. –í `views.py` –∑–∞–º–µ–Ω–∏—Ç—å:

   ```python
   class SavedProjectViewSet(viewsets.ReadOnlyModelViewSet):
   ```

   –Ω–∞:

   ```python
   class SavedProjectViewSet(viewsets.ModelViewSet):
   ```

2. –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å queryset –ø–æ —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (—á—Ç–æ–±—ã –æ–¥–∏–Ω –∏–Ω–≤–µ—Å—Ç–æ—Ä –Ω–µ –≤–∏–¥–µ–ª —á—É–∂–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è):

   ```python
   class SavedProjectViewSet(viewsets.ModelViewSet):
       serializer_class = SavedProjectSerializer

       def get_queryset(self):
           return SavedProject.objects.filter(investor__user=self.request.user)

       def perform_create(self, serializer):
           investor = InvestorProfile.objects.get(user=self.request.user)
           serializer.save(investor=investor)
   ```

3. –í `serializers.py` —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ–ª–µ `investor` –≤ `SavedProjectSerializer` —Å—Ç–æ–∏—Ç **read\_only**, —á—Ç–æ–±—ã –æ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞–ª–æ—Å—å:

   ```python
   class SavedProjectSerializer(serializers.ModelSerializer):
       class Meta:
           model = SavedProject
           fields = "__all__"
           read_only_fields = ("id", "investor")
   ```

---

## üîÑ –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—é –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —à–∞–≥–∏ –¥–ª—è Postman

### üöÄ –®–∞–≥ 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**POST** ‚Üí `http://127.0.0.1:8000/api/auth/login/`
Body:

```json
{
  "email": "investor@example.com",
  "password": "TestPass123!"
}
```

–°–æ—Ö—Ä–∞–Ω–∏ `access`.

---

### üöÄ –®–∞–≥ 2. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ (–∫–∞–∫ –∏–Ω–≤–µ—Å—Ç–æ—Ä)

**GET** ‚Üí `http://127.0.0.1:8000/api/projects/`
Headers:

```
Authorization: Bearer <access_token_investor>
```

---

### üöÄ –®–∞–≥ 3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

**POST** ‚Üí `http://127.0.0.1:8000/api/projects/saved/`
Headers:

```
Authorization: Bearer <access_token_investor>
Content-Type: application/json
```

Body:

```json
{
  "project": 1
}
```

–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:

```json
{
  "id": 1,
  "project": 1,
  "investor": 3
}
```

---

### üöÄ –®–∞–≥ 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

**GET** ‚Üí `http://127.0.0.1:8000/api/projects/saved/`
Headers:

```
Authorization: Bearer <access_token_investor>
```

---

### üöÄ –®–∞–≥ 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã (–∫–∞–∫ —Å—Ç–∞—Ä—Ç–∞–ø)

**POST** ‚Üí `http://127.0.0.1:8000/api/auth/login/`
Body:

```json
{
  "email": "startup@example.com",
  "password": "TestPass123!"
}
```

–ü–æ—Ç–æ–º:
**GET** ‚Üí `http://127.0.0.1:8000/api/projects/my/`
Headers:

```
Authorization: Bearer <access_token_startup>
```

---

üëâ –ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —É —Ç–µ–±—è –≤ Postman –∑–∞—Ä–∞–±–æ—Ç–∞—é—Ç –≤—Å–µ —à–∞–≥–∏.

–•–æ—á–µ—à—å, —è —Å–¥–µ–ª–∞—é —Ç–µ–±–µ –≥–æ—Ç–æ–≤—ã–π **git diff** –¥–ª—è `views.py` –∏ `serializers.py`, —á—Ç–æ–±—ã —Ç—ã —Ç–æ–ª—å–∫–æ –≤—Å—Ç–∞–≤–∏–ª –∏ –∑–∞–∫–æ–º–º–∏—Ç–∏–ª?
